{"version":3,"sources":["webpack:///./src/pages/photography-old.js"],"names":["StyledSection","require","styled","section","OldPhotographyPage","location","isBrowser","window","useState","innerWidth","width","setWidth","isHome","setIsHome","isLoading","setIsLoading","data","setData","path","setPath","fetching","setFetching","useEffect","handleResize","a","firebase","auth","signInAnonymously","console","log","fromFirestore","tmp","currentUser","delete","then","isEmpty","fetchData","hash","id","substring","addEventListener","removeEventListener","animateNav","footer","rel","href"],"mappings":"+PAYMA,GAFIC,EAAQ,QAEIC,IAAOC,QAAV,qFAAGD,CAAH,yCAiGJE,UA5FY,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,SACtBC,EAA8B,oBAAXC,OADkB,EAEjBC,mBAASF,EAAYC,OAAOE,WAAa,GAA5DC,EAFoC,KAE7BC,EAF6B,OAIfH,oBAAS,GAA9BI,EAJoC,KAI5BC,EAJ4B,OAKTL,oBAAS,GAApCM,EALoC,KAKzBC,EALyB,OAMnBP,mBAAS,IAA1BQ,EANoC,KAM9BC,EAN8B,OAOnBT,mBAAS,IAA1BU,EAPoC,KAO9BC,EAP8B,OAQXX,oBAAS,GAAlCY,EARoC,KAQ1BC,EAR0B,KA2E3C,OAjEAC,qBAAU,WACR,IAAKhB,EAAW,OAAO,EAEvB,IAAMiB,EAAe,kBAAMZ,EAASJ,OAAOE,aAH7B,4CAKd,4BAAAe,EAAA,+EAEUC,IAASC,OAAOC,oBAF1B,cAGIC,QAAQC,IAAI,aAHhB,SAIoBC,cAJpB,OAIQC,EAJR,OAKId,EAAQc,GACRhB,GAAa,GACbU,IAASC,OAAOM,YAAYC,SAASC,MAAK,WACxCN,QAAQC,IAAI,gCARlB,kDAWID,QAAQC,IAAR,MACAd,GAAa,GAZjB,2DALc,sBAyBd,GALGoB,YAAQnB,IAASF,IAAcM,IAChCC,GAAY,GArBA,mCAsBZe,IAGE/B,EAASgC,KAAM,CACjB,IAAMC,EAAKjC,EAASgC,KAAKE,UAAU,GACnCpB,EAAQmB,GACRzB,GAAU,QAEVM,EAAQ,IAGRN,GAAU,GAKZ,OAFAN,OAAOiC,iBAAiB,SAAUjB,GAE3B,WACLhB,OAAOkC,oBAAoB,SAAUlB,MAEtC,CAACX,EAAQE,EAAWE,EAAME,EAAMb,EAASgC,KAAMjB,EAAUV,EAAOJ,IAyBjE,kBAAC,IAAD,CAAQM,QAAQ,EAAO8B,YAAY,EAAOC,QAAS/B,GAAUF,EAAQ,KACnE,kBAAC,IAAD,KACE,2DACA,0BAAMkC,IAAI,YAAYC,KAAK,0CAE7B,kBAAC7C,EAAD,KACE,kBAAC,IAAD","file":"component---src-pages-photography-old-js-2bf01edc65b4e6ff0046.js","sourcesContent":["import React, { useEffect, useState } from \"react\"\r\nimport { Layout } from '@components';\r\nimport styled from 'styled-components';\r\nimport PropTypes from 'prop-types';\r\nimport { Helmet } from 'react-helmet';\r\nimport firebase from \"gatsby-plugin-firebase\";\r\nimport { isEmpty } from \"@utils\";\r\nimport { fromFirestore } from '@api';\r\nimport { OldTilesPage, CategoriesPage, NotFoundPage, LoadingPage } from '@components/photography';\r\n\r\nconst _ = require('lodash');\r\n\r\nconst StyledSection = styled.section`\r\n  margin: auto 0;\r\n  padding: 100px 0 0px;\r\n`;\r\n\r\nconst OldPhotographyPage = ({ location }) => {\r\n  const isBrowser = typeof window !== 'undefined'\r\n  const [width, setWidth] = useState(isBrowser ? window.innerWidth : 0)\r\n\r\n  const [isHome, setIsHome] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [data, setData] = useState({});\r\n  const [path, setPath] = useState(\"\");\r\n  const [fetching, setFetching] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!isBrowser) return false\r\n\r\n    const handleResize = () => setWidth(window.innerWidth)\r\n\r\n    async function fetchData() {\r\n      try {\r\n        await firebase.auth().signInAnonymously()\r\n        console.log(\"signed in\");\r\n        let tmp = await fromFirestore();\r\n        setData(tmp);\r\n        setIsLoading(false);\r\n        firebase.auth().currentUser.delete().then(() => {\r\n          console.log('anonymous account deleted');\r\n        });\r\n      } catch(e) {\r\n        console.log(e);\r\n        setIsLoading(false);\r\n      }\r\n    }\r\n    if(isEmpty(data) && isLoading && !fetching) {\r\n      setFetching(true);\r\n      fetchData();\r\n    }\r\n\r\n    if (location.hash) {\r\n      const id = location.hash.substring(1); // location.hash without the '#'\r\n      setPath(id);\r\n      setIsHome(false);\r\n    } else {\r\n      setPath('');\r\n      if(!isHome) {\r\n      }\r\n      setIsHome(true);\r\n    }\r\n\r\n    window.addEventListener(\"resize\", handleResize);\r\n    \r\n    return () => {\r\n      window.removeEventListener(\"resize\", handleResize);\r\n    }\r\n  }, [isHome, isLoading, data, path, location.hash, fetching, width, isBrowser]);\r\n\r\n  /*return (\r\n    <Layout isHome={false} animateNav={false} footer={!isHome || width < 768}>\r\n      <Helmet>\r\n        <title>Portfolio | Howard Tseng</title>\r\n        <link rel=\"canonical\" href=\"https://howardt12345.com/photography\" />\r\n      </Helmet>\r\n      <StyledSection>\r\n       {!isLoading && !isHome && !_.isEmpty(data) && !_.isEmpty(data.getPicturesQuery(path)) && (\r\n          <OldTilesPage data={data.getPicturesQuery(path) ?? []} name={data.getNames(path)} path={path} />\r\n       )}\r\n       {!isLoading && isHome && !_.isEmpty(data) && (\r\n          <CategoriesPage data={data} />\r\n       )}\r\n       {!isLoading && (typeof data.menu === 'undefined' || _.isEmpty(data.menu) || (!isHome && _.isEmpty(data.getPicturesQuery(path)))) && (\r\n          <NotFoundPage />\r\n       )}\r\n       {isLoading && (\r\n         <LoadingPage />\r\n       )} \r\n      </StyledSection>\r\n    </Layout>\r\n  );*/\r\n  return (\r\n    <Layout isHome={false} animateNav={false} footer={!isHome || width < 768}>\r\n      <Helmet>\r\n        <title>Portfolio | Howard Tseng</title>\r\n        <link rel=\"canonical\" href=\"https://howardt12345.com/photography\" />\r\n      </Helmet>\r\n      <StyledSection>\r\n        <NotFoundPage />\r\n      </StyledSection>\r\n    </Layout>\r\n  )\r\n}\r\n\r\nOldPhotographyPage.propTypes = {\r\n  location: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default OldPhotographyPage;"],"sourceRoot":""}